<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ problem.title }} - Network Programming OJ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <a href="/" class="back-link">‚Üê Quay l·∫°i danh s√°ch b√†i t·∫≠p</a>
        
        <h1>{{ problem.title }}</h1>
        
        <div class="description">
            <h3>üìù M√¥ t·∫£ b√†i to√°n</h3>
            <p>{{ problem.description }}</p>
        </div>
        
        <div class="connection-info">
            <h3>üîó Th√¥ng tin k·∫øt n·ªëi</h3>
            <p><strong>Host:</strong> <code>127.0.0.1</code></p>
            <p><strong>Port:</strong> <code>{{ problem.port }}</code></p>
            <p><strong>Session Token c·ªßa b·∫°n:</strong> <code class="token">{{ session_token }}</code></p>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border-left: 4px solid #ffc107;">
                <p><strong>‚ö†Ô∏è Quan tr·ªçng:</strong> H√£y sao ch√©p Session Token n√†y v√† s·ª≠ d·ª•ng trong ch∆∞∆°ng tr√¨nh client c·ªßa b·∫°n. Token n√†y ch·ªâ c√≥ hi·ªáu l·ª±c cho phi√™n l√†m b√†i hi·ªán t·∫°i.</p>
            </div>
        </div>

        <div style="background: rgba(102, 126, 234, 0.05); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h3>üíª H∆∞·ªõng d·∫´n l·∫≠p tr√¨nh</h3>
            <p><strong>B∆∞·ªõc 1:</strong> T·∫°o socket TCP v√† k·∫øt n·ªëi ƒë·∫øn <code>127.0.0.1:{{ problem.port }}</code></p>
            <p><strong>B∆∞·ªõc 2:</strong> Server s·∫Ω g·ª≠i y√™u c·∫ßu <code>SEND_TOKEN</code>, h√£y g·ª≠i l·∫°i Session Token c·ªßa b·∫°n</p>
            <p><strong>B∆∞·ªõc 3:</strong> Server s·∫Ω g·ª≠i file log, h√£y nh·∫≠n v√† l∆∞u file n√†y</p>
            <p><strong>B∆∞·ªõc 4:</strong> ƒê·ªçc file log, t√¨m d√≤ng c√≥ <code>SECRET_CODE:</code> v√† l·∫•y m√£ b√≠ m·∫≠t</p>
            <p><strong>B∆∞·ªõc 5:</strong> G·ª≠i l·∫°i k·∫øt qu·∫£ theo ƒë·ªãnh d·∫°ng <code>RESULT: [m√£_b√≠_m·∫≠t]</code></p>
            <p><strong>B∆∞·ªõc 6:</strong> Nh·∫≠n "M√£ n·ªôp b√†i" t·ª´ server v√† n·ªôp ·ªü form b√™n d∆∞·ªõi</p>
        </div>

        <div class="submission-form">
            <h3>üì§ N·ªôp b√†i</h3>
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="flash {{ category }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <form method="post">
                <label for="submission_code">M√£ n·ªôp b√†i (Submission Code):</label>
                <input type="text" id="submission_code" name="submission_code" 
                       placeholder="D√°n m√£ n·ªôp b√†i m√† b·∫°n nh·∫≠n ƒë∆∞·ª£c t·ª´ ch∆∞∆°ng tr√¨nh client" required>
                <button type="submit">N·ªôp b√†i</button>
            </form>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(40, 167, 69, 0.1); border-radius: 8px; border-left: 4px solid #28a745;">
                <p><strong>üí° G·ª£i √Ω:</strong> Sau khi ch∆∞∆°ng tr√¨nh client c·ªßa b·∫°n ho√†n th√†nh th√†nh c√¥ng, server s·∫Ω g·ª≠i v·ªÅ m·ªôt chu·ªói hash d√†i. ƒê√≥ ch√≠nh l√† "M√£ n·ªôp b√†i" b·∫°n c·∫ßn d√°n v√†o √¥ tr√™n.</p>
            </div>
        </div>
        
        <div style="margin-top: 30px; padding: 20px; background: rgba(108, 117, 125, 0.1); border-radius: 10px;">
            <h3>üîß Code m·∫´u Python</h3>
            <p>B·∫°n c√≥ th·ªÉ tham kh·∫£o c·∫•u tr√∫c c∆° b·∫£n sau:</p>
            <pre style="background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.9em;"><code>import socket

# Th√¥ng tin k·∫øt n·ªëi
HOST = '127.0.0.1'
PORT = {{ problem.port }}
TOKEN = '{{ session_token }}'

# T·∫°o socket v√† k·∫øt n·ªëi
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect((HOST, PORT))

# G·ª≠i token khi server y√™u c·∫ßu
# Nh·∫≠n v√† x·ª≠ l√Ω file log
# T√¨m SECRET_CODE v√† g·ª≠i l·∫°i
# Nh·∫≠n submission code

sock.close()</code></pre>
        </div>
    </div>
</body>
</html>

